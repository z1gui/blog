<!DOCTYPE html><html><head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport">
  <meta name="robots" content="index, follow">
  <!-- title -->
  
    
  <title>子规入梧桐 - z1gui</title>
    
  
  
  <!-- open graph -->
  <meta property="og:type" content="website">
<meta property="og:title" content="子规入梧桐">
<meta property="og:url" content="https://www.lazydaily.cn/index.html">
<meta property="og:site_name" content="子规入梧桐">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="z1gui">
<meta name="twitter:card" content="summary">
  <!-- canonical -->
  
  <link rel="canonical" href="https://www.lazydaily.cn">
  
  <!-- Favicon -->
  <link rel="shortcut icon" href="/img/favicon.png">
  
  <!-- Google Fonts 预加载 - 优化字体加载 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  
  <!-- 预加载所有字体 -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;1,400&amp;family=Noto+Serif:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&amp;family=Noto+Serif+SC:wght@400;700;900&amp;display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;1,400&amp;family=Noto+Serif:ital,wght@0,400;0,700;0,900;1,400;1,700;1,900&amp;family=Noto+Serif+SC:wght@400;700;900&amp;display=swap">
  
  <!-- 字体加载优化脚本 -->
  <script>
    // 字体加载优化
    (function() {
      // 检查是否支持Font Loading API
      if ('fonts' in document) {
        // 异步加载字体，不阻塞页面渲染
        setTimeout(function() {
          Promise.all([
            document.fonts.load('400 1em "JetBrains Mono"'),
            document.fonts.load('400 1em "Noto Serif"'),
            document.fonts.load('400 1em "Noto Serif SC"')
          ]).then(function() {
            document.documentElement.classList.add('fonts-loaded');
          }).catch(function() {
            document.documentElement.classList.add('fonts-fallback');
          });
        }, 0);
      } else {
        // 不支持Font Loading API的浏览器，直接使用系统字体
        document.documentElement.classList.add('fonts-fallback');
      }
    })();
  </script>
  
  <!-- CSS -->
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/markdown.css">

  
<link rel="stylesheet" href="/css/fonts.css">

  
<link rel="stylesheet" href="/css/a11y-dark.min.css">

  
  <!-- 图片懒加载 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 预加载队列
      const preloadQueue = [];
      let isProcessing = false;
      let processedImages = new Set();
      
      // 创建loading效果
      function createLoadingEffect(img) {
        // 检查是否已经有容器
        let container = img.parentElement;
        if (!container || !container.classList.contains('image-container')) {
          // 创建图片容器
          container = document.createElement('div');
          container.className = 'image-container loading';
          
          // 将图片包装在容器中
          img.parentNode.insertBefore(container, img);
          container.appendChild(img);
        } else {
          // 如果已有容器，添加loading类
          container.classList.add('loading');
        }
        
        return container;
      }
      
      // 移除loading效果
      function removeLoadingEffect(container) {
        if (container && container.classList.contains('loading')) {
          container.classList.remove('loading');
        }
      }
      
      // 处理预加载队列
      function processPreloadQueue() {
        if (isProcessing || preloadQueue.length === 0) return;
        
        isProcessing = true;
        const img = preloadQueue.shift();
        
        if (img && img.dataset.src && !processedImages.has(img)) {
          processedImages.add(img);
          
          // 添加loading效果
          const container = createLoadingEffect(img);
          
          img.src = img.dataset.src;
          
          img.addEventListener('load', function() {
            img.classList.add('loaded');
            removeLoadingEffect(container);
            isProcessing = false;
            // 继续处理队列中的下一张图片
            setTimeout(processPreloadQueue, 10);
          });
          
          img.addEventListener('error', function() {
            removeLoadingEffect(container);
            isProcessing = false;
            // 继续处理队列中的下一张图片
            setTimeout(processPreloadQueue, 10);
          });
        } else {
          isProcessing = false;
          // 继续处理队列中的下一张图片
          setTimeout(processPreloadQueue, 10);
        }
      }
      
      // 处理所有图片
      function handleImages() {
        // 选择所有懒加载图片，但排除favicon
        const lazyImages = document.querySelectorAll('.lazy-image');
        const allImages = document.querySelectorAll('img');
        

        
        // 如果没有懒加载图片，检查是否有需要处理的图片
        if (lazyImages.length === 0) {
          allImages.forEach(img => {
            // 排除favicon.png
            if (img.src && !img.src.includes('favicon.png') && !img.src.includes('github.png') && !img.src.includes('mail.png') && !img.src.includes('rss-fill.png') && !img.src.includes('Telegram.png') &&
                img.dataset.src && !img.classList.contains('lazy-image')) {
              // 如果有data-src属性，说明是懒加载图片
              img.classList.add('lazy-image');
              
              // 添加loading效果
              const container = createLoadingEffect(img);
              
              // 立即加载图片
              img.src = img.dataset.src;
              
              // 图片加载完成后的处理
              img.addEventListener('load', function() {
                img.classList.add('loaded');
                removeLoadingEffect(container);
              });
              
              img.addEventListener('error', function() {
                removeLoadingEffect(container);
              });
            }
          });
          return;
        }
        
        // 使用Intersection Observer处理懒加载图片
        const imageObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              
              // 检查是否有data-src属性
              if (img.dataset.src && !processedImages.has(img)) {
                // 将图片添加到预加载队列
                preloadQueue.push(img);
                processPreloadQueue();
              } else if (!img.dataset.src) {
                // 如果没有data-src，直接显示图片
                img.classList.add('loaded');
              }
              
              // 停止观察这个图片
              observer.unobserve(img);
            }
          });
        }, {
          rootMargin: '400px 0px', // 提前400px开始加载，大幅提升加载速度
          threshold: 0.001 // 降低阈值，图片刚进入视口就开始加载
        });
        
        // 开始观察所有懒加载图片
        lazyImages.forEach(img => {
          // 排除favicon.png
          if (!img.src.includes('favicon.png') && !img.src.includes('github.png') && !img.src.includes('mail.png') && !img.src.includes('rss-fill.png') && !img.src.includes('Telegram.png')) {
            imageObserver.observe(img);
          }
        });
      }
      
      // 立即执行一次
      handleImages();
      
      // 减少延迟时间，提升响应速度
      setTimeout(handleImages, 20);
    });
  </script>
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="子规入梧桐" type="application/atom+xml">
</head>

    <body class="">
        <div class="paper">
            <div class="paper-main">
                <div class="header">
    <div class="header-content">
        <!-- 头像和主标题一起可点击 -->
        <a href="/" class="header-home-link">
            <div class="hero-header">
                <div class="hero-header-visual">
                    <div class="hero-header-graphic">
                        <img src="/img/favicon.png" alt="Logo" width="30" height="30">
                    </div>
                </div>
                <div class="hero-header-text">
                    <h1 class="hero-header-title">子规入梧桐</h1>
                </div>
            </div>
        </a>
        <!-- 导航栏 -->
        <ul class="nav">
            
                <!-- 其他页面保持原有导航 -->
                
                <li>
                    
                    <a href="/" class="current">
                       主页
                       
                    </a>
                </li>
                
                <li>
                    
                    <a href="/archives" class="">
                       归档
                       
                    </a>
                </li>
                
                <li>
                    
                    <a href="/about" class="">
                       关于
                       
                    </a>
                </li>
                
                <li>
                    
                    <a href="/use" class="">
                       设备
                       
                    </a>
                </li>
                
                <li>
                    
                    <a href="https://uhufoundme.sol.build/" class="" target="&quot;_blank&quot;" rel="&quot;noopener" noreferrer&#34;="">
                       碎碎念
                       
                       <span class="external-link-icon">🔗</span>
                       
                    </a>
                </li>
                
            
        </ul>
    </div>
</div>

                
<div class="post-list">
    
    <div class="post">
        <a class="post-link" href="/712386768996883/">
            <div class="post-title">晋城游记</div>
            <div class="post-except">
                
该篇游记仅记录玉皇庙、关帝庙、晋城博物馆以及原本博物馆相关内容，偏向历史爱好者。

起因是 Amelia 在小红书上看到，郑州去山西晋城的大巴来回免费，且 2.5~3 小时就能到。所以我们就打算当天去，当天回。
买票和预约车票可以直接在微信公众号上买，郑州去 ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/%E6%B8%B8%E8%AE%B0/" class="tag-link"># 游记</a>
                    
                        <a href="/tags/%E9%83%91%E5%B7%9E/" class="tag-link"># 郑州</a>
                    
                </div>
            
            <div class="post-date">2025年08月31日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/6885322357796359/">
            <div class="post-title">Planet配置Web3域名</div>
            <div class="post-except">
                Planet 项目是 V 站站长 Livid 很早之前启动的项目。最近 V 站也出了 $V2EX 币， Livid 也一直在推动区块链和 Web3 在 V 站的快速应用。跟着这个趋势，我也学习了很多这方面的知识。

 Planet 是一款免费的开源 macOS ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/Planet/" class="tag-link"># Planet</a>
                    
                </div>
            
            <div class="post-date">2025年08月08日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/761386768996888/">
            <div class="post-title">「持续更新」AI辅助编程使用心得</div>
            <div class="post-except">
                前言2025 年初，Deepseek 爆火。随之而来，就是各种 AI 相关的技术如同雨后春笋般涌现。其中关于 AI 编程方向，各家大厂各显神通。
早在 2024 年初，我就开始接触 AI 编程，一开始就使用了 Cursor。当我熟悉了它的操作之后，惊叹于它输出 ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/Cursor/" class="tag-link"># Cursor</a>
                    
                </div>
            
            <div class="post-date">2025年05月13日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/761386768996832/">
            <div class="post-title">为什么一定要有一个个人网站？</div>
            <div class="post-except">
                前言大家好，我是子规，很高兴能够在这里和大家相遇。本篇文章记录该站建立的初衷、建站过程以及在过程中的思考。
为什么建立这个网站在此网站建立之前，我通常在CSDN上写作。
但随着时间推移，我开始发现，CSDN上的文章， Although it is very g ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/%E9%9A%8F%E7%AC%94/" class="tag-link"># 随笔</a>
                    
                </div>
            
            <div class="post-date">2025年04月24日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/176138676899684/">
            <div class="post-title">JavaScript 创建执行释放过程</div>
            <div class="post-except">
                一、对象创建过程a. 内存分配
当我们创建一个对象时（无论是通过构造函数还是字面量方式），JavaScript 引擎会在内存堆（Heap）中为这个对象分配空间。堆是一个用于存储复杂数据结构（如对象和数组）的区域。

// 创建对象并分配内存
var perso ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/javascript/" class="tag-link"># javascript</a>
                    
                </div>
            
            <div class="post-date">2025年03月01日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/761386768996831/">
            <div class="post-title">Kafka深入浅出</div>
            <div class="post-except">
                Kafka 服务器端的代码是由 Scala 代码编写，支持面向对象编程和函数式数据，编译过后也是普通的 .class 文件。其的作用：提供统一的、高吞吐量、低延迟的平台来处理实时数据
一、基本概念「Kafka 是什么？主要应用场景什么？」Kafka 是一个分布 ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/Kafka/" class="tag-link"># Kafka</a>
                    
                </div>
            
            <div class="post-date">2024年12月11日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/761386768996841/">
            <div class="post-title">聊聊Java IO的那些事</div>
            <div class="post-except">
                



BIO
NIO
AIO



IO模型
同步阻塞
同步非阻塞（多路复用）
异步非阻塞


编程难度
简单
复杂
复杂


可靠性
差
好
好


吞吐量
低
高
高


阅前须知阻塞 IO 和 非阻塞 IO
这两个概念是 程序级别 的。主要描述是程序请 ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/java/" class="tag-link"># java</a>
                    
                        <a href="/tags/IO/" class="tag-link"># IO</a>
                    
                        <a href="/tags/NIO/" class="tag-link"># NIO</a>
                    
                        <a href="/tags/BIO/" class="tag-link"># BIO</a>
                    
                </div>
            
            <div class="post-date">2024年12月01日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/761386768996885/">
            <div class="post-title">类加载器以及双亲委派模型</div>
            <div class="post-except">
                一个类的生命周期（7个阶段）加载-验证-准备-解析-初始化-使用-卸载
其中，类的加载过程是十分重要的过程。在这一过程，是由JVM提供的类加载器来完成。
类加载器JVM提供三层类加载器
启动类加载器：Bootstrap Class Loader ，是C++写的 ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/java/" class="tag-link"># java</a>
                    
                        <a href="/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%99%A8/" class="tag-link"># 类加载器</a>
                    
                        <a href="/tags/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%A8%A1%E5%9E%8B/" class="tag-link"># 双亲委派模型</a>
                    
                </div>
            
            <div class="post-date">2024年09月01日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/761386768996512/">
            <div class="post-title">javascript中 const，var，let的区别</div>
            <div class="post-except">
                var、const、let 同样都是声明变量的关键词。
一、var 和 let 区别作用域var 的作用域只能是全局或者是整个函数块，而 let 的作用域既可以是全局变量或者是整个函数，还可以是 if, while, switch 限定的代码块。
functi ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/javascript/" class="tag-link"># javascript</a>
                    
                </div>
            
            <div class="post-date">2024年07月23日</div>
        </div>
    </div>
    
    <div class="post">
        <a class="post-link" href="/7613867548996883/">
            <div class="post-title">为什么总是乱码？来看看编码格式吧</div>
            <div class="post-except">
                一、 #ASCII 码计算机内所有的信息都是二进制位。一个字节包含 8 个二进制位，可以表示 256 个状态，每个状态表示一个符号。
ASCII 码一共规定了128个字符的编码，比如空格 SPACE 是32（二进制00100000），大写的字母 A 是65（二 ...
            </div>
        </a>
        <div class="post-meta-bottom">
            
                <div class="post-tags">
                    
                        <a href="/tags/%E7%BC%96%E7%A0%81/" class="tag-link"># 编码</a>
                    
                </div>
            
            <div class="post-date">2024年03月21日</div>
        </div>
    </div>
    
</div>

<div class="paginator">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
</div>

                
                    <div class="footer">
    <!-- <div class="typewriter-container">
        <span class="typewriter-text" id="typewriter"></span>
        <span class="cursor">|</span>
    </div> -->
    <span>Copyright © <script>document.write(new Date().getFullYear())</script> <a target="_blank" rel="noopener" href="https://github.com/z1gui">z1gui</a></span>
    <div class="footer-bottom">
        <span>以<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"> CC-BY-NC-SA 4.0 </a>许可发布</span>
        
            <!-- 页脚社交链接 -->
    <div class="footer-social-links">
        <a href="https://github.com/z1gui" target="_blank" title="GitHub" class="footer-social-icon">
            <img src="/img/github.png" alt="GitHub">
        </a>
        <a href="https://t.me/z1gui" target="_blank" title="Telegram" class="footer-social-icon">
            <img src="/img/Telegram.png" alt="Telegram">
        </a>
        <a href="mailto:leon6line@gmail.com" title="Email" class="footer-social-icon">
            <img src="/img/mail.png" alt="Email">
        </a>
        <a href="/atom.xml" title="RSS Feed" class="footer-social-icon">
            <img src="/img/rss-fill.png" alt="RSS Feed">
        </a>
    </div>
    </div>
</div>

<link rel="stylesheet" href="/css/a11y-dark.min.css">


<script src="/js/highlight.min.js"></script>


<script src="/js/highlightjs-line-numbers.js"></script>

<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>

<style>
.heading-anchor {
    position: absolute;
    left: 0;
    color: var(--font-color-3);
    opacity: 0;
    transition: opacity 0.3s, color 0.3s;
    text-decoration: none;
    cursor: pointer;
}

.heading-anchor:hover {
    color: var(--font-color-0);
}

h1:hover .heading-anchor,
h2:hover .heading-anchor,
h3:hover .heading-anchor,
h4:hover .heading-anchor,
h5:hover .heading-anchor,
h6:hover .heading-anchor {
    opacity: 1;
}

.copy-tooltip {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--font-color-1);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 1000;
    animation: fadeInOut 2s ease-in-out;
}

@keyframes fadeInOut {
    0% { opacity: 0; }
    20% { opacity: 1; }
    80% { opacity: 1; }
    100% { opacity: 0; }
}
</style>



                
            </div>
        </div>

        <!-- JavaScript -->
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            const html = document.documentElement;
            const header = document.querySelector('.header');
            
            // 头部内容滚动显示/隐藏功能
            let lastScrollTop = 0;
            let scrollThreshold = 3; // 滚动阈值，避免微小滚动触发
            
            function handleHeaderScroll() {
                if (!header) return;
                
                const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                // 计算滚动距离
                const scrollDifference = currentScrollTop - lastScrollTop;
                
                // 向下滚动隐藏
                if (scrollDifference > scrollThreshold && currentScrollTop > 30) {
                    header.classList.add('hidden');
                }
                // 向上滚动显示
                else if (scrollDifference < -scrollThreshold) {
                    header.classList.remove('hidden');
                }
                // 在页面顶部时的处理：非文章页显示，文章页保持当前（隐藏）
                else if (currentScrollTop <= 30) {
                    if (!document.body.classList.contains('is-post')) {
                        header.classList.remove('hidden');
                    }
                }
                
                lastScrollTop = currentScrollTop;
            }
            
            // 监听滚动事件
            window.addEventListener('scroll', handleHeaderScroll, { passive: true });
            
            // 页面加载时的头部初始状态
            if (header) {
                if (document.body.classList.contains('is-post')) {
                    // 文章页：初始隐藏
                    header.classList.add('hidden');
                } else {
                    // 非文章页：初始显示
                    header.classList.remove('hidden');
                }
            }
            
            // 目录切换按钮功能（仅在文章页面）
            function setupTocToggle() {
                const tocToggleBtn = document.getElementById('tocToggleBtn');
                const postToc = document.getElementById('postToc');
                
                if (!tocToggleBtn || !postToc) {
                    // 元素还没准备好，延迟重试
                    setTimeout(setupTocToggle, 100);
                    return;
                }
                

                
                // 延迟应用localStorage状态，确保目录已初始化
                setTimeout(() => {
                    const tocHidden = localStorage.getItem('tocHidden') === 'true';
                    if (tocHidden) {
                        postToc.classList.add('hidden');
                        tocToggleBtn.classList.add('hidden');

                    }
                }, 200);
                
                // 点击切换目录显示/隐藏
                tocToggleBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    

                    
                    if (postToc) {
                        const isHidden = postToc.classList.contains('hidden');

                        
                        if (isHidden) {
                            // 显示目录
                            postToc.classList.remove('hidden');
                            this.classList.remove('hidden');
                            // 确保目录可见
                            postToc.style.display = 'flex';
                            localStorage.setItem('tocHidden', 'false');

                        } else {
                            // 隐藏目录
                            postToc.classList.add('hidden');
                            this.classList.add('hidden');
                            localStorage.setItem('tocHidden', 'true');

                        }
                    }
                });
                

            }
            
            // 启动目录切换功能设置
            setupTocToggle();

            // 设备页面 3D 轮播初始化
            if (document.body.classList.contains('is-use')) {
                const container = document.querySelector('.paper-main');
                if (container) {
                    const deviceCards = Array.from(container.querySelectorAll('.device-card'));
                    if (deviceCards.length > 0) {
                        const carousel = document.createElement('div');
                        carousel.className = 'device-carousel';
                        const track = document.createElement('div');
                        track.className = 'device-carousel-track';

                        // 先把轮播插入到第一个卡片的父级中，位于首个卡片之前
                        const firstCard = deviceCards[0];
                        const parentNode = firstCard.parentNode;
                        if (parentNode) {
                            parentNode.insertBefore(carousel, firstCard);
                        }

                        deviceCards.forEach((card) => {
                            const slide = document.createElement('div');
                            slide.className = 'device-slide';
                            slide.appendChild(card);
                            track.appendChild(slide);
                        });

                        const nav = document.createElement('div');
                        nav.className = 'device-carousel-nav';
                        const prevBtn = document.createElement('button');
                        prevBtn.className = 'device-carousel-btn device-prev';
                        prevBtn.setAttribute('aria-label', '上一项');
                        prevBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
                        const nextBtn = document.createElement('button');
                        nextBtn.className = 'device-carousel-btn device-next';
                        nextBtn.setAttribute('aria-label', '下一项');
                        nextBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>';
                        nav.appendChild(prevBtn);
                        nav.appendChild(nextBtn);

                        const pagination = document.createElement('div');
                        pagination.className = 'device-carousel-pagination';
                        const dots = deviceCards.map(() => {
                            const dot = document.createElement('div');
                            dot.className = 'device-dot';
                            pagination.appendChild(dot);
                            return dot;
                        });

                        const controls = document.createElement('div');
                        controls.className = 'device-carousel-controls';
                        
                        const leftNav = document.createElement('div');
                        leftNav.className = 'device-carousel-nav';
                        leftNav.appendChild(prevBtn);
                        
                        const rightNav = document.createElement('div');
                        rightNav.className = 'device-carousel-nav';
                        rightNav.appendChild(nextBtn);
                        
                        controls.appendChild(leftNav);
                        controls.appendChild(pagination);
                        controls.appendChild(rightNav);

                        carousel.appendChild(track);
                        carousel.appendChild(controls);

                        let current = 0;
                        const total = deviceCards.length;

                        function layout() {
                            const slides = Array.from(track.children);
                            slides.forEach((slide, i) => {
                                const offset = ((i - current + total) % total);
                                let translateX = 0;
                                let translateZ = 0;
                                let rotateY = 0;
                                let zIndex = 0;
                                // 仅显示当前与两侧相邻，共3项
                                if (offset === 0) {
                                    translateX = -50;
                                    translateZ = 120;
                                    rotateY = 0;
                                    zIndex = 3;
                                    slide.classList.add('active');
                                    slide.classList.remove('hidden');
                                    slide.classList.remove('side');
                                } else if (offset === 1) {
                                    translateX = 20;
                                    translateZ = 0;
                                    rotateY = -20;
                                    zIndex = 2;
                                    slide.classList.remove('active');
                                    slide.classList.remove('hidden');
                                    slide.classList.add('side');
                                } else if (offset === total - 1) {
                                    translateX = -120;
                                    translateZ = 0;
                                    rotateY = 20;
                                    zIndex = 2;
                                    slide.classList.remove('active');
                                    slide.classList.remove('hidden');
                                    slide.classList.add('side');
                                } else {
                                    translateX = (offset < total / 2 ? 160 : -240);
                                    translateZ = -120;
                                    rotateY = offset < total / 2 ? -30 : 30;
                                    zIndex = 1;
                                    slide.classList.remove('active');
                                    slide.classList.add('hidden');
                                    slide.classList.remove('side');
                                }
                                slide.style.zIndex = zIndex.toString();
                                slide.style.transform = `translate3d(${translateX}%, 0, ${translateZ}px) rotateY(${rotateY}deg)`;
                            });
                            dots.forEach((dot, i) => { dot.classList.toggle('active', i === current); });
                        }

                        function go(delta) { current = (current + delta + total) % total; layout(); }

                        prevBtn.addEventListener('click', () => go(-1));
                        nextBtn.addEventListener('click', () => go(1));
                        dots.forEach((dot, i) => dot.addEventListener('click', () => { current = i; layout(); }));

                        carousel.setAttribute('tabindex', '0');
                        carousel.addEventListener('keydown', (e) => { if (e.key === 'ArrowLeft') go(-1); if (e.key === 'ArrowRight') go(1); });
                        let startX = 0;
                        carousel.addEventListener('touchstart', (e) => { startX = e.touches[0].clientX; }, { passive: true });
                        carousel.addEventListener('touchend', (e) => {
                            const dx = e.changedTouches[0].clientX - startX;
                            if (dx > 40) go(-1);
                            if (dx < -40) go(1);
                        }, { passive: true });

                        layout();

                        // 点击左右侧卡片切换
                        track.addEventListener('click', (e) => {
                            const slides = Array.from(track.children);
                            const clickedSlide = e.target.closest('.device-slide');
                            if (!clickedSlide) return;
                            const index = slides.indexOf(clickedSlide);
                            if (index === -1) return;
                            const offset = ((index - current + total) % total);
                            if (offset === 1) go(1);
                            if (offset === total - 1) go(-1);
                        });

                        // 禁用非激活卡片的图片点击放大
                        track.addEventListener('click', (e) => {
                            if (e.target.tagName === 'IMG') {
                                const slide = e.target.closest('.device-slide');
                                if (!slide || !slide.classList.contains('active')) {
                                    e.preventDefault();
                                    e.stopPropagation();
                                }
                            }
                        });
                    }
                }
            }
        });
        </script>
        
        <!-- 异步加载代码高亮 -->
        
        
        <!-- 返回顶部功能 -->
        
        
        <!-- 异步加载目录功能 -->
        <script async="" src="/js/toc.js"></script>
    
</body></html>